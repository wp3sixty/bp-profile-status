!function(s){window.BPPS={init:function(){this.bppsCharacterLimit(),this.bppsCurrentStatusEdit(),this.bppsCurrentStatusEditCancel(),this.bppsCurrentStatusDelete(),this.bppsStatusDelete(),this.bppsStatusEdit(),this.bppsSetCurrentStatus()},bppsCharacterLimit:function(){s("#bpps_add_new_status").on("keyup",function(t){var p=140,e=s(this).val(),a=e.length,n=parseInt(p-a);n<0&&(alert(bpps_main_js.i18n.bpps_max_character_alert),n++,s(this).val(e.substring(0,p))),s(".bpps-add-new span span").html(n)})},bppsCurrentStatusEdit:function(){s("#bpps-current-status-edit").on("click",function(t){t.preventDefault();var p=s("#bpps-current-status-org").val();s("#bpps-current-status-text, #bpps-current-status-edit, #bpps-current-status-delete").addClass("bpps_hide"),s("#bpps-current-status-direct-edit").removeClass("bpps_hide"),s("#bpps-current-status-textarea").val(p),s("#bpps-current-status-textarea").focus()})},bppsCurrentStatusEditCancel:function(){s("#bpps_cancel").on("click",function(t){t.preventDefault(),s("#bpps_add_new_status").val(""),s("#bpps_add_new_status").focusout(),s("#bpps_add_new_status").trigger("keyup"),s("#bpps_update_status_and_set").addClass("bpps_hide"),s("#bpps_update_status_and_set").val(bpps_main_js.i18n.bpps_update_and_set_as_current),s("#bpps_update_status").addClass("bpps_hide"),s("#bpps_cancel").addClass("bpps_hide"),s("#bpps_add_new").removeClass("bpps_hide"),s("#bpps_add_new_and_set").removeClass("bpps_hide")}),s("#bpps_cancel_update").on("click",function(t){s("#bpps-current-status-text, #bpps-current-status-edit, #bpps-current-status-delete").removeClass("bpps_hide"),s("#bpps-current-status-direct-edit").addClass("bpps_hide")})},bppsCurrentStatusDelete:function(){s("#bpps-current-status-delete").on("click",function(t){if(t.preventDefault(),confirm(bpps_main_js.i18n.bpps_delete_current_status_confirm)){var p={action:"bpps_delete_current_status",status:s("#bpps-current-status-org").val(),nonce:s("#bpps_delete_current_status_nonce").val()};s.ajax({url:ajaxurl,type:"post",data:p,success:function(t){if(t.success){alert(bpps_main_js.i18n.bpps_delete_current_status_success),!0===bpps_main_js.i18n.bpps_no_current_status_display&&s("#bpps-current-status").html(bpps_main_js.i18n.bpps_no_current_status_set+" ");var p=s("<a />");p.attr("href",bpps_main_js.i18n.bpps_status_link),p.attr("title",bpps_main_js.i18n.bpps_add_new_status),p.text(bpps_main_js.i18n.bpps_add_new_status),s("#bpps-current-status").append(p)}}})}})},bppsStatusDelete:function(){s(".bpps-status-delete").on("click",function(t){t.preventDefault();var p=this;if(confirm(bpps_main_js.i18n.bpps_delete_status_confirm)){var e={action:"bpps_delete_status",status:s(p).parent().siblings("td").children(".bpps_old_status_org").val(),nonce:s("#bpps_delete_status_nonce").val()};s.ajax({url:ajaxurl,type:"post",data:e,success:function(t){t.success&&(alert(bpps_main_js.i18n.bpps_status_delete_success),s(p).parent().parent().remove())}})}})},bppsStatusEdit:function(){s(".bpps-status-edit").on("click",function(t){t.preventDefault();var p=this,e=s(p).parent().siblings("td").children(".bpps_old_status_org").val();s("#bpps-edit-status-org").val(e),s("#bpps_add_new_status").val(e),s(p).parent().siblings("td").children(".bpps_old_status_org").val(e),s("#bpps_add_new_status").focus(),s("#bpps_add_new_status").trigger("keyup"),s("#bpps_add_new").addClass("bpps_hide"),s("#bpps_add_new_and_set").addClass("bpps_hide"),s("#bpps_update_status").removeClass("bpps_hide"),s("#bpps_update_status_and_set").removeClass("bpps_hide"),s("#bpps_cancel").removeClass("bpps_hide")})},bppsSetCurrentStatus:function(){s(".bpps-set-status").on("click",function(t){t.preventDefault();var p=this;if(s(p).parent().siblings("td").children(".bpps_old_status_org").length>0)var e=s(p).parent().siblings("td").children(".bpps_old_status_org").val();else if(s(p).siblings(".bpps-status-org").length>0)var e=s(p).siblings(".bpps-status-org").val();else if(s(p).siblings("#bpps-current-status-org").length>0)var e=s(p).siblings("#bpps-current-status-org").val();var a={action:"bpps_set_current_status",status:e,nonce:bpps_main_js.set_current_status_nonce};s.ajax({url:ajaxurl,type:"post",data:a,success:function(s){s.success&&(alert(bpps_main_js.i18n.bpps_status_set_success),window.location=window.location)}})})}},s(document).ready(function(){window.BPPS.init()})}(jQuery);